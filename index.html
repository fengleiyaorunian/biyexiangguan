<!DOCTYPE html>
<html lang="en">

<head>
    <title>Hello World</title>
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.102/Build/Cesium/Cesium.js"></script>
    <link href="https://cesium.com/downloads/cesiumjs/releases/1.102/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
    <style>
        html,
        body,
        #cesiumContainer {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
</head>

<body>
    <!-- <script src="https://cesium.com/downloads/cesiumjs/releases/1.102/Build/Cesium/Cesium.js"></script>   onmouseup  -->
    <button id="btn">点我进行对比</button>
    <div id="cesiumContainer"></div>
    <script>
        var tdtUrl = 'https://t{s}.tianditu.gov.cn/';

        var viewer = new Cesium.Viewer("cesiumContainer", {

            animation: false,//是否创建动画小器件，左下角仪表 
            timeline: false,//是否显示时间轴    
            sceneModePicker: false,//是否显示3D/2D选择器    
            baseLayerPicker: false,//是否显示图层选择器   
            geocoder: false,//是否显示geocoder小器件，右上角查询按钮   
            scene3DOnly: true,//如果设置为true，则所有几何图形以3D模式绘制以节约GPU资源 
            navigationHelpButton: false,//是否显示右上角的帮助按钮
            homeButton: false,//是否显示Home按钮
            infoBox: true,//是否显示信息框    
            showRenderLoopErrors: false,    //如果设为true，将在一个HTML面板中显示错误信息

        });


        // 去掉entity的点击事件 start   免得总是点屏幕出现loading界面
        viewer.cesiumWidget.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);
        viewer.cesiumWidget.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK);
        // 去掉entity的点击事件 end


        const esri = new Cesium.ArcGisMapServerImageryProvider({
            url: 'https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer'
        });
        viewer.imageryLayers.addImageryProvider(esri);


        let tileset = new Cesium.Cesium3DTileset({
            url: "./small_3d_title/tileset.json",
            maximumScreenSpaceError: 2,          //最大的屏幕空间误差
            maximumNumberOfLoadedTiles: 1000,    //最大加载瓦片数
        });
        viewer.scene.primitives.add(tileset);
        viewer.zoomTo(tileset);



        const polygon1 = viewer.entities.add({
            polygon: {
                hierarchy: Cesium.Cartesian3.fromDegreesArrayHeights([
                    119.65607247371491, 30.37123136718532, 1000,
                    119.656597914043, 30.37123286453514, 1000,
                    119.65659468067275, 30.372139076377668, 1000,
                    119.65606979668608, 30.3721377013219, 1000,
                    119.65607247371491, 30.37123136718532, 1000,
                ]),
                //  放东西的地方   videoElement,     268.35496491544944
                material: Cesium.Color.RED.withAlpha(0.5),
                classificationType: Cesium.ClassificationType.CESIUM_3D_TILE,
                clampToGround: false,
            },
            position: Cesium.Cartesian3.fromDegrees(119.656224, 30.3714165, 270),
        });




        document.getElementById("btn").addEventListener("click", threeFn);

        function threeFn() {
            viewer.entities.removeAll();
            var position = Cesium.Cartesian3.fromDegrees(119.656224, 30.3714165, 3000);

            var polygon2 = viewer.entities.add({
                polygon: {
                    hierarchy: Cesium.Cartesian3.fromDegreesArrayHeights([
                        119.65607247371491, 30.37123136718532, 1000,
                        119.656597914043, 30.37123286453514, 1000,
                        119.65659468067275, 30.372139076377668, 1000,
                        119.65606979668608, 30.3721377013219, 1000,
                        119.65607247371491, 30.37123136718532, 1000,
                    ]),

                    material: Cesium.Color.RED.withAlpha(0.5),
                    clampToGround: false,
                },
                position: position,

            });
            viewer.zoomTo(polygon2);
        }





    </script>
</body>

</html>